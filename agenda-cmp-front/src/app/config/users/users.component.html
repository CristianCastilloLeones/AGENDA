<mat-progress-bar class="top-progress" mode="indeterminate" color="accent" *ngIf="processing"></mat-progress-bar>

<div class="mat-elevation-z8">

  <button mat-button color="primary" (click)="newAdmEmpresa()" *ngIf="type=='adm_empresa'">Nuevo Administrador de Empresa</button>
  <button mat-button color="primary" (click)="newAdmSucursal()" *ngIf="type=='adm_sucursal'">Nuevo Administrador de Sucursal</button>
  <button mat-button color="primary" (click)="newDoc()" *ngIf="type=='especialista'">Nuevo Especialista</button>

  <button mat-button color="primary" (click)="newPatient()" *ngIf="type=='paciente'">Nuevo Paciente</button>
  <button mat-button color="primary" (click)="newAssistant()" *ngIf="type=='asistente'">Nuevo Asistente</button>
  <button mat-button color="primary" (click)="newEnfermero()" *ngIf="type=='enfermero'">Nuevo Enfermero(a)</button>
  <button mat-button color="primary" (click)="newEcografista()" *ngIf="type=='ecografista'">Nuevo Ecografista</button>
  <button mat-button color="primary" (click)="newLaboratorista()" *ngIf="type=='laboratorista'">Nuevo Laboratorista</button>
  <button mat-button color="primary" (click)="newGestorExamenes()" *ngIf="type=='gestor_examenes'">Nuevo Gestor de Examenes</button>
  <button mat-button color="primary" (click)="newAsistenteCaja()" *ngIf="type=='asistentes_caja'">Nuevo Asistente de Caja</button>

  <mat-form-field>
    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar">
  </mat-form-field>

  <button mat-icon-button color="primary" style="float:right; margin-top:15px;" (click)="usersReport()">
    <mat-icon>get_app</mat-icon>
  </button>

  <table mat-table class="full-width-table mat-elevation-z8" [dataSource]="dataSource" matSort aria-label="Elements">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
      <td mat-cell *matCellDef="let row">{{row.id}}</td>
    </ng-container>


    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
      <td mat-cell *matCellDef="let row">{{row.name}}</td>
    </ng-container>

    <ng-container matColumnDef="surname">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Apellido</th>
      <td mat-cell *matCellDef="let row">{{row.surname}}</td>
    </ng-container>

    <ng-container matColumnDef="dni">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Cedula</th>
      <td mat-cell *matCellDef="let row">{{row.dni}}</td>
    </ng-container>

    <ng-container matColumnDef="phone">
      <th mat-header-cell *matHeaderCellDef>Telefono</th>
      <td mat-cell *matCellDef="let row">{{row.phone}}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Email</th>
      <td mat-cell *matCellDef="let row">{{row.email}}</td>
    </ng-container>

    <ng-container matColumnDef="branch_office" *ngIf="type != 'paciente'">
      <th mat-header-cell *matHeaderCellDef>Sucursal</th>
      <td mat-cell *matCellDef="let row">{{row.branch_office == 17 ? 'Guasmo' : 'Suburbio'}}</td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Estatus</th>
      <td mat-cell *matCellDef="let row">
        <mat-icon [ngClass]="{on : row.status, off : !row.status}">{{row.status ? 'add_circle' : 'remove_circle'}}</mat-icon>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="options(row)" class="tablerow"></tr>
  </table>

  <mat-paginator #paginator [length]="dataSource.data.length" [pageIndex]="0" [pageSize]="50" [pageSizeOptions]="[25, 50, 100, 250]">
  </mat-paginator>
</div>
